{"ast":null,"code":"var _jsxFileName = \"/Users/tom/Desktop/coronavirus-statistics/src/BarChart.js\";\nimport React, { Component } from 'react';\nimport Chart from \"chart.js\";\n\nclass BarChart extends Component {\n  constructor() {\n    super();\n    this.chartRef = React.createRef();\n    this.state = {\n      casesList: [],\n      country: null,\n      language: 'en',\n      phrases: [{\n        \"lang\": \"mk\",\n        \"language\": \"Јазик\",\n        \"country\": \"Држава\",\n        \"title\": \"Корона Статистика\",\n        \"errorMsg\": \"Ве молиме, внесете држава.\",\n        \"totalCases\": \"Вкупно случаи\",\n        \"totalDeaths\": \"Вкупно смртни случаи\",\n        \"active\": \"Активни\",\n        \"recovered\": \"Излечени\",\n        \"todayCases\": \"Денешни случаи\",\n        \"todayDeaths\": \"Денешни смртни случаи\"\n      }, {\n        \"lang\": \"en\",\n        \"totalCases\": \"Total cases\",\n        \"totalDeaths\": \"Total deaths\",\n        \"active\": \"Active\",\n        \"recovered\": \"Recovered\",\n        \"todayCases\": \"Today cases\",\n        \"todayDeaths\": \"Today deaths\",\n        \"errorMsg\": \"Please, input a country.\",\n        \"title\": \"Coronavirus Statistics\",\n        \"language\": \"Language\",\n        \"country\": \"Country\"\n      }],\n      phrase: null\n    };\n    this.state.phrase = this.state.phrases[1];\n    document.title = this.state.phrase.title;\n  }\n\n  renderTableData() {\n    fetch('https://coronavirus-monitor.p.rapidapi.com/coronavirus/cases_by_country.php', {\n      headers: {\n        'X-RapidAPI-Host': 'coronavirus-monitor.p.rapidapi.com',\n        'X-RapidAPI-Key': 'd2be6cb091msh3947f8fd6c13878p17991djsnfa2142ace598'\n      }\n    }).then(results => {\n      return results.json();\n    }).then(data => {\n      let casesList = [];\n      let countriesList = [];\n      data.countries_stat.map(c => {\n        return casesList.push({\n          \"cases\": c.cases.replace(',', ''),\n          \"country\": c.country_name,\n          \"deaths\": c.deaths.replace(',', ''),\n          \"recovered\": c.total_recovered.replace(',', ''),\n          \"todayDeaths\": c.new_deaths.replace(',', ''),\n          \"todayCases\": c.new_cases.replace(',', ''),\n          \"active\": c.active_cases.replace(',', '')\n        }), countriesList.push(c.country_name);\n      });\n      this.drawChartJS(casesList);\n      this.setState({\n        casesList: casesList\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.renderTableData();\n  }\n\n  getTimeline() {\n    if (this.state.country !== undefined && this.state.country !== null) {\n      window.location.href = '/timechart/country/' + this.state.country;\n    } else {\n      alert(this.state.phrase.errorMsg);\n    }\n  }\n\n  drawChartJS(casesList, str, orderBy) {\n    if (str == null) {\n      str = \"\";\n    }\n\n    const myChartRef = this.chartRef.current.getContext(\"2d\");\n    let deathList = [];\n    let countryList = [];\n    let caseList = [];\n    let todayDeathsList = [];\n    let todayCasesList = [];\n    let activeList = [];\n    let recoveredList = [];\n\n    switch (orderBy) {\n      case \"active\":\n        casesList.sort((a, b) => parseInt(a.active) > parseInt(b.active) ? -1 : 1);\n        break;\n\n      case \"recovered\":\n        casesList.sort((a, b) => parseInt(a.recovered) > parseInt(b.recovered) ? -1 : 1);\n        break;\n\n      case \"cases\":\n        casesList.sort((a, b) => parseInt(a.cases) > parseInt(b.cases) ? -1 : 1);\n        break;\n\n      case \"deaths\":\n        casesList.sort((a, b) => parseInt(a.deaths) > parseInt(b.deaths) ? -1 : 1);\n        break;\n\n      case \"todayCases\":\n        casesList.sort((a, b) => parseInt(a.todayCases) > parseInt(b.todayCases) ? -1 : 1);\n        break;\n\n      case \"todayDeaths\":\n        casesList.sort((a, b) => parseInt(a.todayDeaths) > parseInt(b.todayDeaths) ? -1 : 1);\n        break;\n\n      default:\n        casesList.sort((a, b) => parseInt(a.cases) > parseInt(b.cases) ? -1 : 1);\n        break;\n    }\n\n    for (let i = 0; i < casesList.length; i++) {\n      if (casesList[i].country.toLowerCase().includes(str.toLowerCase())) {\n        deathList.push(casesList[i].deaths);\n        countryList.push(casesList[i].country);\n        caseList.push(casesList[i].cases);\n        todayDeathsList.push(casesList[i].todayDeaths);\n        todayCasesList.push(casesList[i].todayCases);\n        activeList.push(casesList[i].active);\n        recoveredList.push(casesList[i].recovered);\n      }\n    }\n\n    if (str !== null && str !== \"\") {\n      try {\n        this.setState({\n          country: countryList[0]\n        }); //               this.state.country = countryList[0];\n      } catch {}\n    }\n\n    let datasetBars = [];\n    let phrase = this.state.phrases[1];\n\n    for (let index = 0; index < this.state.phrases.length; index++) {\n      if (this.state.phrases[index].lang === this.state.language) {\n        phrase = this.state.phrases[index];\n      }\n    } //        this.state.phrase = phrase;\n\n\n    this.setState({\n      phrase: phrase\n    });\n    document.title = phrase.title;\n    let dataType = \"bar\";\n\n    if (str === \"\") {\n      dataType = \"line\";\n    }\n\n    datasetBars = [{\n      label: phrase.totalDeaths,\n      type: dataType,\n      data: deathList,\n      backgroundColor: \"#7F171F\",\n      borderColor: \"#7F171F\",\n      fill: \"#7F171F\"\n    }, {\n      label: phrase.totalCases,\n      data: caseList,\n      type: dataType,\n      backgroundColor: \" #003366\",\n      borderColor: \" #003366\",\n      fill: \" #003366\"\n    }, {\n      label: phrase.todayCases,\n      type: dataType,\n      backgroundColor: \"#B67721\",\n      borderColor: \"#B67721\",\n      fill: \"#B67721\",\n      data: todayCasesList\n    }, {\n      label: phrase.recovered,\n      type: dataType,\n      backgroundColor: \"#21B6A8\",\n      borderColor: \"#21B6A8\",\n      fill: \"#21B6A8\",\n      data: recoveredList\n    }, {\n      label: phrase.todayDeaths,\n      type: dataType,\n      backgroundColor: \"#B6212D\",\n      borderColor: \"#B6212D\",\n      data: todayDeathsList,\n      labels: todayDeathsList\n    }, {\n      label: phrase.active,\n      type: dataType,\n      labels: activeList,\n      backgroundColor: \"#177F75\",\n      borderColor: \"#177F75\",\n      fill: \"#177F75\",\n      data: activeList\n    }];\n\n    try {\n      this.myChart.destroy();\n    } catch {}\n\n    this.myChart = new Chart(myChartRef, {\n      type: \"bar\",\n      data: {\n        labels: countryList,\n        datasets: datasetBars\n      },\n      options: {\n        maintainAspectRatio: false,\n        responsive: true\n      }\n    });\n    this.myChart.canvas.parentNode.style.height = '90vh';\n  }\n\n  async changeLanguage(lang) {\n    await this.setState({\n      language: lang\n    });\n    this.drawChartJS(this.state.casesList);\n  }\n\n  getLang() {\n    return this.state.language;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, this.state.phrase.title), React.createElement(\"div\", {\n      className: \"infoData\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, this.state.phrase.language, React.createElement(\"select\", {\n      className: \"infoChild\",\n      onChange: e => this.changeLanguage(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"en\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"English\"), React.createElement(\"option\", {\n      value: \"mk\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"\\u041C\\u0430\\u043A\\u0435\\u0434\\u043E\\u043D\\u0441\\u043A\\u0438\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, this.state.phrase.country, React.createElement(\"input\", {\n      className: \"infoChild\",\n      placeholder: this.state.language === 'en' ? 'Type a country' : 'Внесете држава',\n      onChange: e => this.drawChartJS(this.state.casesList, e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"button\",\n      className: \"infoChild\",\n      onClick: e => this.getTimeline(this.state.casesList, e.target.value),\n      value: this.state.language === 'en' ? 'Chronological' : 'Хронолошки',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, this.state.language === 'en' ? 'Order by' : 'Сортирај по', React.createElement(\"select\", {\n      className: \"infoChild\",\n      onChange: e => this.drawChartJS(this.state.casesList, \"\", e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"cases\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, this.state.phrase.totalCases), React.createElement(\"option\", {\n      value: \"deaths\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, this.state.phrase.totalDeaths), React.createElement(\"option\", {\n      value: \"todayCases\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, this.state.language === 'en' ? 'Number of today cases' : 'Денешни случаи'), React.createElement(\"option\", {\n      value: \"todayDeaths\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, this.state.language === 'en' ? 'Number of today deaths' : 'Денешни смртни случаи'), React.createElement(\"option\", {\n      value: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, this.state.language === 'en' ? 'Number of active cases' : 'Активни случаи'), React.createElement(\"option\", {\n      value: \"recovered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, this.state.language === 'en' ? 'Number of recovered cases' : 'Излечени случаи'))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    })), React.createElement(\"canvas\", {\n      id: \"myChart\",\n      ref: this.chartRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default BarChart;","map":{"version":3,"sources":["/Users/tom/Desktop/coronavirus-statistics/src/BarChart.js"],"names":["React","Component","Chart","BarChart","constructor","chartRef","createRef","state","casesList","country","language","phrases","phrase","document","title","renderTableData","fetch","headers","then","results","json","data","countriesList","countries_stat","map","c","push","cases","replace","country_name","deaths","total_recovered","new_deaths","new_cases","active_cases","drawChartJS","setState","componentDidMount","getTimeline","undefined","window","location","href","alert","errorMsg","str","orderBy","myChartRef","current","getContext","deathList","countryList","caseList","todayDeathsList","todayCasesList","activeList","recoveredList","sort","a","b","parseInt","active","recovered","todayCases","todayDeaths","i","length","toLowerCase","includes","datasetBars","index","lang","dataType","label","totalDeaths","type","backgroundColor","borderColor","fill","totalCases","labels","myChart","destroy","datasets","options","maintainAspectRatio","responsive","canvas","parentNode","style","height","changeLanguage","getLang","render","e","target","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Chart from \"chart.js\";\n\n\nclass BarChart extends Component {\n    myChart;\n    chartRef = React.createRef();\n    constructor(){\n        super();\n        this.state={\n            casesList:[],\n            country: null,\n            language: 'en',\n            phrases: [{\"lang\": \"mk\",\"language\": \"Јазик\",\"country\":\"Држава\", \"title\": \"Корона Статистика\", \"errorMsg\":\"Ве молиме, внесете држава.\", \"totalCases\":\"Вкупно случаи\", \"totalDeaths\":\"Вкупно смртни случаи\", \"active\":\"Активни\",\"recovered\":\"Излечени\",\"todayCases\":\"Денешни случаи\",\"todayDeaths\":\"Денешни смртни случаи\"}, {\"lang\":\"en\",\"totalCases\":\"Total cases\", \"totalDeaths\": \"Total deaths\", \"active\":\"Active\",\"recovered\":\"Recovered\",\"todayCases\":\"Today cases\",\"todayDeaths\":\"Today deaths\",  \"errorMsg\":\"Please, input a country.\",\"title\":\"Coronavirus Statistics\",\"language\": \"Language\",\"country\":\"Country\"}],\n            phrase: null\n        };\n        this.state.phrase = this.state.phrases[1];\n        document.title = this.state.phrase.title;\n    }\n    \n     renderTableData() {\n        fetch('https://coronavirus-monitor.p.rapidapi.com/coronavirus/cases_by_country.php',\n        {  \n            headers: {\n              'X-RapidAPI-Host': 'coronavirus-monitor.p.rapidapi.com', \n              'X-RapidAPI-Key': 'd2be6cb091msh3947f8fd6c13878p17991djsnfa2142ace598'\n            }\n        })\n            .then(results=>{\n            return results.json();\n        })\n        .then(data => {\n            let casesList = [];\n            let countriesList = [];\n            data.countries_stat.map((c)=>{\n                return(\n                    casesList.push({\"cases\": c.cases.replace(',',''), \"country\":c.country_name, \"deaths\":c.deaths.replace(',',''), \"recovered\":c.total_recovered.replace(',',''), \"todayDeaths\":c.new_deaths.replace(',',''), \"todayCases\":c.new_cases.replace(',',''), \"active\":c.active_cases.replace(',','')}),\n                    countriesList.push(c.country_name)\n                )\n            });\n            this.drawChartJS(casesList);            \n            this.setState({casesList: casesList});\n        })\n     }\n     componentDidMount() {\n      this.renderTableData();\n    }\n    getTimeline()\n    {\n        if(this.state.country !== undefined && this.state.country !== null)\n        {\n            window.location.href = '/timechart/country/'+this.state.country;\n        }\n        else{\n            alert(this.state.phrase.errorMsg);\n        }\n    }\n    drawChartJS(casesList, str, orderBy){\n        if(str == null)\n        {\n            str=\"\";\n        }\n        const myChartRef = this.chartRef.current.getContext(\"2d\");\n        let deathList = [];\n        let countryList = [];\n        let caseList = [];\n        let todayDeathsList = [];\n        let todayCasesList = [];\n        let activeList = [];\n        let recoveredList = [];\n        \n        switch(orderBy){\n            case \"active\":\n                casesList.sort((a, b) => (parseInt(a.active) > parseInt(b.active)) ? -1 : 1);\n                break;\n            case \"recovered\":\n                casesList.sort((a, b) => (parseInt(a.recovered) > parseInt(b.recovered)) ? -1 : 1);\n                break;\n            case \"cases\":\n                casesList.sort((a, b) => (parseInt(a.cases) > parseInt(b.cases)) ? -1 : 1);\n                break;\n            case \"deaths\":\n                casesList.sort((a, b) => (parseInt(a.deaths) > parseInt(b.deaths)) ? -1 : 1);\n                break;\n            case \"todayCases\":\n                casesList.sort((a, b) => (parseInt(a.todayCases) > parseInt(b.todayCases)) ? -1 : 1);\n                break;\n            case \"todayDeaths\":\n                casesList.sort((a, b) => (parseInt(a.todayDeaths) > parseInt(b.todayDeaths)) ? -1 : 1);\n                break;\n            default:\n                casesList.sort((a, b) => (parseInt(a.cases) > parseInt(b.cases)) ? -1 : 1);\n                break;\n        }\n\n        for(let i = 0; i<casesList.length;i++)\n        {\n            if(casesList[i].country.toLowerCase().includes(str.toLowerCase())){\n                deathList.push(casesList[i].deaths);\n                countryList.push(casesList[i].country);\n                caseList.push(casesList[i].cases);\n                todayDeathsList.push(casesList[i].todayDeaths);\n                todayCasesList.push(casesList[i].todayCases);\n                activeList.push(casesList[i].active);\n                recoveredList.push(casesList[i].recovered)\n            }\n        }\n        if(str !== null && str !== \"\")\n        {\n            try{\n                this.setState({\n                    country:  countryList[0]\n                  })\n                //               this.state.country = countryList[0];\n            }\n            catch{}\n        }\n        let datasetBars = [];\n        let phrase = this.state.phrases[1];\n        for (let index = 0; index < this.state.phrases.length; index++) {\n            if(this.state.phrases[index].lang === this.state.language)\n            {\n                phrase = this.state.phrases[index];   \n            }\n        }\n//        this.state.phrase = phrase;\n        this.setState({\n            phrase:  phrase\n        })      \n        document.title = phrase.title;\n\n        let dataType = \"bar\";\n        if(str===\"\")\n        {\n            dataType = \"line\";\n        }\n        datasetBars = [{\n            label: phrase.totalDeaths,\n            type: dataType,\n            data: deathList,\n            backgroundColor: \"#7F171F\",\n            borderColor: \"#7F171F\",\n            fill: \"#7F171F\",\n          },\n        {                    \n            label: phrase.totalCases,\n            data: caseList,\n            type: dataType,\n            backgroundColor:\" #003366\",\n            borderColor:\" #003366\",\n            fill:\" #003366\",\n        },\n        {\n            label: phrase.todayCases,\n            type: dataType,\n            backgroundColor:\"#B67721\",\n            borderColor:\"#B67721\",\n            fill:\"#B67721\",\n            data: todayCasesList,\n        },\n        {\n            label: phrase.recovered,\n            type: dataType,\n            backgroundColor:\"#21B6A8\",\n            borderColor:\"#21B6A8\",\n            fill:\"#21B6A8\",\n            data: recoveredList,\n        },\n        {\n            label: phrase.todayDeaths,\n            type: dataType,\n            backgroundColor: \"#B6212D\",\n            borderColor: \"#B6212D\",\n            data: todayDeathsList,\n            labels: todayDeathsList\n        },\n        {\n            label: phrase.active,\n            type: dataType,\n            labels: activeList,\n            backgroundColor:\"#177F75\",\n            borderColor:\"#177F75\",\n            fill:\"#177F75\",\n            data: activeList,\n        }\n      ];\n        \n        try{\n            this.myChart.destroy();\n        }\n        catch{}\n\n      this.myChart = new Chart(myChartRef, {\n          type: \"bar\",\n          data: {\n              labels: countryList,\n              datasets: datasetBars\n          },\n          options: { \n              maintainAspectRatio: false,\n              responsive: true\n          }\n      });\n      this.myChart.canvas.parentNode.style.height = '90vh';\n    }\n    \n      async changeLanguage(lang) {\n        await this.setState({\n          language:  lang\n        })\n        this.drawChartJS(this.state.casesList);\n      }\n      getLang(){\n          return this.state.language;\n      }\n    render(){\n     return (\n     <div>\n    <h1>{this.state.phrase.title}</h1>\n     <div className=\"infoData\">\n         <div>\n         {this.state.phrase.language}\n         \n            <select className=\"infoChild\" onChange={(e)=>this.changeLanguage(e.target.value)}>\n                <option value=\"en\">English</option>\n                <option value=\"mk\">Македонски</option>\n            </select>\n            </div><div>\n            {this.state.phrase.country}\n            <input className=\"infoChild\" placeholder={this.state.language === 'en' ? 'Type a country' : 'Внесете држава'} onChange={(e) => this.drawChartJS(this.state.casesList, e.target.value)} ></input>\n            <input type=\"button\" className=\"infoChild\" onClick={(e) => this.getTimeline(this.state.casesList, e.target.value)} value={this.state.language === 'en' ? 'Chronological' : 'Хронолошки'} ></input>\n            </div><div>{this.state.language === 'en' ? 'Order by' : 'Сортирај по'}\n            <select className=\"infoChild\" onChange={(e)=>this.drawChartJS(this.state.casesList,\"\",e.target.value)}>\n                <option value=\"cases\">{this.state.phrase.totalCases}</option>\n                <option value=\"deaths\">{this.state.phrase.totalDeaths}</option>\n                <option value=\"todayCases\">{this.state.language==='en'? 'Number of today cases': 'Денешни случаи'}</option>\n                <option value=\"todayDeaths\">{this.state.language==='en'? 'Number of today deaths': 'Денешни смртни случаи'}</option>\n                <option value=\"active\">{this.state.language==='en'? 'Number of active cases': 'Активни случаи'}</option>\n                <option value=\"recovered\">{this.state.language==='en'? 'Number of recovered cases': 'Излечени случаи'}</option>\n            </select>\n            </div>\n            <div>\n            </div>\n        </div>\n            <canvas \n                id=\"myChart\"\n                ref={this.chartRef}\n            />\n        </div>\n    )\n    }\n  }\n      \n  export default BarChart;"]},"metadata":{},"sourceType":"module"}